<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN"
 "http://www.springframework.org/dtd/spring-beans.dtd">

<beans default-autowire="byName">

    <import resource="db-config.xml"/>

	<!--Spring helpers-->
    <bean class="org.springframework.beans.factory.annotation.RequiredAnnotationBeanPostProcessor"/>

    <bean id="resourseBase" class="java.lang.String">
        <constructor-arg index="0" value="./web"/>
    </bean>

    <!--Jetty beans-->
    <bean id="serverInitializer" class="net.sf.xfresh.jetty.JettyServerInitializer">
        <property name="port" value="33001"/>
        <property name="maxThreads" value="10"/>
        <property name="handlers">
            <list>
                <bean class="net.sf.xfresh.jetty.SingleYaletHandler"/>
            </list>
        </property>
    </bean>

    <bean id="propertyConfigurer"
          class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
          lazy-init="false">
        <property name="ignoreResourceNotFound" value="true"/>
        <property name="locations">
            <list>
                <value>app.properties</value>
            </list>
        </property>
    </bean>

	<!--Fresh core beans-->
    <bean id="yaletProcessor" class="net.sf.xfresh.core.YaletProcessor">
        <property name="encoding" value="utf-8"/>
    </bean>

    <bean id="yaletSupport" class="net.sf.xfresh.ext.ExtYaletSupport">
        <property name="resourceBase" value="./web"/>
    </bean>

    <bean id="yaletResolver" class="net.sf.xfresh.core.SpringYaletResolver"/>

    <bean id="saxGenerator" class="net.sf.xfresh.core.DefaultSaxGenerator"/>

    <bean id="singleYaletProcessor" class="net.sf.xfresh.core.DefaultSingleYaletProcessor"/>

    <!--auth beans-->

    <bean id="userService" class="net.sf.xfresh.auth.DbUserService"/>

    <bean id="authService" class="net.sf.xfresh.auth.CookieAuthService"/>

    <!--yalets-->

    <bean id="userIdYalet" class="net.sf.xfresh.auth.yalet.UserIdYalet"/>
    <bean id="addUserYalet" class="net.sf.xfresh.auth.yalet.AddUserYalet"/>
    <bean id="autorizeYalet" class="net.sf.xfresh.auth.yalet.DoAuthYalet"/>
    <bean id="userInfoYalet" class="net.sf.xfresh.auth.yalet.UserInfoYalet"/>

</beans>